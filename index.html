<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C·ªù Vua ƒê∆°n Gi·∫£n</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
</head>

<body>
    <div id="main-menu" class="screen">
        <h1 class="title-large">C·ªú VUA</h1>
        <div class="menu-buttons">
            <button id="btn-pvc" class="btn-large">ƒê·∫•u v·ªõi M√°y</button>
            <button id="btn-pvp" class="btn-large">2 Ng∆∞·ªùi Ch∆°i</button>
            <button id="btn-online" class="btn-large" style="background: #bf616a; border-color: #d08770;">Ch∆°i Online
                (Beta)</button>
            <button id="btn-settings" class="btn-large" style="background: #5e81ac; border-color: #81a1c1;">C√†i
                ƒê·∫∑t</button>
        </div>
    </div>

    <!-- SETTINGS MODAL -->
    <div id="settings-modal" class="modal hidden">
        <div class="modal-content">
            <h2 style="margin-bottom: 20px;">C√†i ƒê·∫∑t</h2>

            <div style="margin-bottom: 20px; text-align: left;">
                <label style="color: #fff; font-size: 1.2rem;">ƒê·ªô Kh√≥ (ELO):</label>
                <select id="difficulty-sel" style="width: 100%; margin-top: 5px; padding: 10px;">
                    <option value="2">D·ªÖ (Newbie)</option>
                    <option value="3">V·ª´a (Amateur)</option>
                    <option value="4" selected>Kh√≥ (Pro)</option>
                </select>
            </div>

            <div style="margin-bottom: 20px; text-align: left;">
                <label style="color: #fff; font-size: 1.2rem;">Giao Di·ªán:</label>
                <select id="theme-sel" style="width: 100%; margin-top: 5px; padding: 10px;">
                    <option value="green">C·ªè (Nature)</option>
                    <option value="alien">Ngo√†i H√†nh Tinh (Alien)</option>
                    <option value="wave">Bi·ªÉn C·∫£ (Wave)</option>
                    <option value="astra">V≈© Tr·ª• (Astra)</option>
                    <option value="sky">B·∫ßu Tr·ªùi (Sky)</option>
                    <option value="fire">L·ª≠a (Fire)</option>
                    <option value="ice">BƒÉng (Ice)</option>
                    <option value="earth">ƒê·∫•t (Earth)</option>
                    <option value="midnight">ƒê√™m (Midnight)</option>
                    <option value="candy">K·∫πo Ng·ªçt (Candy)</option>
                </select>
            </div>

            <div style="margin-bottom: 20px; text-align: left;">
                <label style="color: #fff; font-size: 1.2rem;">Ch·ªçn B√™n (ƒê·∫•u M√°y):</label>
                <select id="side-sel" style="width: 100%; margin-top: 5px; padding: 10px;">
                    <option value="w">C·∫ßm Tr·∫Øng (ƒêi Tr∆∞·ªõc)</option>
                    <option value="b">C·∫ßm ƒêen (ƒêi Sau)</option>
                    <option value="random">Ng·∫´u Nhi√™n</option>
                </select>
            </div>

            <div style="margin-bottom: 20px; text-align: left;">
                <label style="color: #fff; font-size: 1.2rem;">Th·ªùi Gian (Ph√∫t):</label>
                <select id="time-sel" style="width: 100%; margin-top: 5px; padding: 10px;">
                    <option value="0">Kh√¥ng gi·ªõi h·∫°n</option>
                    <option value="3">3 Ph√∫t (Si√™u Ch·ªõp)</option>
                    <option value="5">5 Ph√∫t (Ch·ªõp)</option>
                    <option value="10">10 Ph√∫t (Nhanh)</option>
                    <option value="30">30 Ph√∫t (C·ªï ƒêi·ªÉn)</option>
                </select>
            </div>

            <div style="margin-bottom: 30px; text-align: left;">
                <label style="color: #fff; font-size: 1.2rem;">Ki·ªÉu Qu√¢n C·ªù:</label>
                <select id="piece-sel" style="width: 100%; margin-top: 5px; padding: 10px;">
                    <option value="unicode">C·ªï ƒêi·ªÉn (Unicode)</option>
                    <option value="alpha" selected>Hi·ªán ƒê·∫°i (Vector)</option>
                </select>
            </div>

            <div class="modal-actions">
                <button id="close-settings-btn" class="btn-primary">L∆∞u & ƒê√≥ng</button>
            </div>
        </div>
    </div>

    <!-- ONLINE MENU -->
    <div id="online-menu" class="screen hidden">
        <h1 class="title-large">CH∆†I ONLINE</h1>
        <div class="menu-buttons" style="max-width: 400px;">
            <div class="status-box" id="online-status" style="margin-bottom: 20px;">ƒêang k·∫øt n·ªëi server...</div>

            <button id="create-room-btn" class="btn-large">T·∫°o Ph√≤ng (Host)</button>

            <div style="display: flex; gap: 10px; width: 100%;">
                <input type="text" id="room-id-input" placeholder="Nh·∫≠p ID ph√≤ng..."
                    style="flex: 1; padding: 15px; border-radius: 8px; border: none;">
                <button id="join-room-btn" class="btn-large" style="padding: 15px;">V√†o</button>
            </div>

            <div id="room-info" class="hidden"
                style="margin-top: 20px; background: #3b4252; padding: 15px; border-radius: 8px;">
                <p>ID Ph√≤ng c·ªßa b·∫°n:</p>
                <p id="my-room-id"
                    style="font-size: 2rem; color: #ffd700; font-weight: bold; cursor: pointer; user-select: text;">...
                </p>
                <p style="font-size: 0.8rem; color: #aaa;">Copy ID n√†y g·ª≠i cho b·∫°n b√®</p>
            </div>

            <button id="back-online-btn" class="btn-secondary" style="margin-top: 20px;">Quay L·∫°i</button>
        </div>
    </div>

    <div id="game-screen" class="hidden">
        <!-- Header -->
        <div class="header-row">
            <button id="back-btn" class="icon-btn">‚¨Ö</button>
            <h1 class="title small">C·ªú VUA</h1>
            <button id="chat-toggle-btn" class="icon-btn" style="display: none;">üí¨</button>
        </div>

        <div style="display: flex; width: 100%; justify-content: space-between; color: #aaa; margin-bottom: 5px;">
            <div id="timer-top">--:--</div>
            <div id="timer-bot">--:--</div>
        </div>

        <!-- Status -->
        <div id="status" class="status-box">L∆∞·ª£t c·ªßa Tr·∫Øng</div>

        <!-- Board -->
        <div id="board" class="chess-board"></div>

        <!-- Chat Panel -->
        <div id="chat-panel" class="hidden" style="position: fixed; right: 10px; bottom: 10px; width: 300px; height: 400px; background: #2e3440; border-radius: 8px; border: 1px solid #4c566a; display: flex; flex-direction: column; z-index: 100;">
            <div style="padding: 10px; border-bottom: 1px solid #4c566a; font-weight: bold; color: #eceff4;">üí¨ Chat</div>
            <div id="chat-messages" style="flex: 1; overflow-y: auto; padding: 10px; color: #eceff4; font-size: 0.9rem;"></div>
            <div style="padding: 10px; border-top: 1px solid #4c566a; display: flex; gap: 5px;">
                <input type="text" id="chat-input" placeholder="Nh·∫≠p tin nh·∫Øn..." style="flex: 1; padding: 8px; border-radius: 4px; border: none;">
                <button id="chat-send-btn" class="btn-primary" style="padding: 8px 12px; cursor: pointer;">G·ª≠i</button>
            </div>
        </div>
    </div>

    <!-- Game Over Modal -->
    <div id="game-over-modal" class="modal hidden">
        <div class="modal-content">
            <h2 id="winner-text">TR·∫ÆNG TH·∫ÆNG!</h2>
            <p id="reason-text">b·∫±ng Chi·∫øu b√≠</p>
            <div class="modal-actions">
                <button id="play-again-btn" class="btn-primary">Ch∆°i L·∫°i</button>
                <button id="menu-btn" class="btn-secondary">Menu Ch√≠nh</button>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/peerjs@1.5.4/dist/peerjs.min.js"></script>
    <script src="game.js"></script>
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js');
        }
    </script>
</body>

</html>